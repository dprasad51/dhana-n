<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>üè∏ Player Manager</title>
<style>
  body { margin:0; font-family:system-ui,Arial; background:#0c0f13; color:#f2f5f9; }
  header { padding:14px; background:#131826; position:sticky; top:0; z-index:5; }
  h1 { margin:0; font-size:20px; }

  .form { display:grid; grid-template-columns:repeat(auto-fill,minmax(200px,1fr)); gap:10px; margin-top:10px; }
  input,textarea { padding:6px; border-radius:8px; border:1px solid #1f2738; background:#0e1320; color:#fff; }
  textarea { min-width:200px; min-height:60px; }
  .btn { padding:6px 12px; border-radius:8px; border:none; cursor:pointer; background:#2a82ff; color:#fff; }

  main { padding:16px; }
  table { width:100%; border-collapse:collapse; }
  th,td { padding:8px; border-bottom:1px solid #2a2f40; text-align:left; }
  tr:hover { background:#1c2335; cursor:pointer; }

  /* Detail panel */
  #detailPanel { position:fixed; top:0; right:0; width:320px; height:100%; background:#131826; border-left:2px solid #2a82ff; padding:16px; overflow:auto; display:none; }
  #detailPanel h2 { margin-top:0; }
  #detailPanel img { width:100%; border-radius:12px; margin-bottom:12px; }
  #closeDetail { background:#ef4444; margin-top:10px; }
</style>
</head>
<body>

<header>
  <h1>üè∏ Player Manager</h1>
  <div class="form">
    <input id="pId" placeholder="Player ID">
    <input id="pAadhar" placeholder="Aadhaar No.">
    <input id="pName" placeholder="Name">
    <input id="pAge" placeholder="Age" type="number">
    <input id="pCountry" placeholder="Country">
    <input id="pPhoto" type="file" accept="image/*">
    <textarea id="pBio" placeholder="Short Bio"></textarea>
    <input id="pVideo" placeholder="Video URL">
    <button class="btn" id="addBtn">Ôºã Add Player</button>
    <input id="fileName" placeholder="File name (without .json)">
    <button class="btn" id="exportBtn">Export</button>
    <input id="importFile" type="file" accept="application/json" style="display:none">
    <button class="btn" id="importBtn">Import</button>
  </div>
  <input id="searchBar" placeholder="üîç Search players..." style="margin-top:10px; width:100%; padding:8px; border-radius:8px; border:1px solid #1f2738; background:#0e1320; color:#fff;">
</header>

<main>
  <table id="playerTable">
    <thead>
      <tr><th>ID</th><th>Name</th><th>Country</th><th>Age</th><th>P</th><th>W</th><th>L</th><th>PF</th><th>PA</th></tr>
    </thead>
    <tbody></tbody>
  </table>
</main>

<!-- Detail Panel -->
<div id="detailPanel">
  <button class="btn" id="closeDetail">Close ‚úñ</button>
  <div id="detailContent"></div>
</div>

<script>
const S={players:[]};
const tableBody=document.querySelector("#playerTable tbody");
const detailPanel=document.getElementById("detailPanel");
const detailContent=document.getElementById("detailContent");

function renderPlayers(filter=""){
  tableBody.innerHTML="";
  S.players
    .filter(p=>p.name.toLowerCase().includes(filter.toLowerCase()))
    .forEach((p)=>{
      const tr=document.createElement("tr");
      tr.innerHTML=`
        <td>${p.id||"-"}</td>
        <td>${p.name}</td>
        <td>${p.country||""}</td>
        <td>${p.age||""}</td>
        <td>${p.stats?.matchesPlayed||0}</td>
        <td>${p.stats?.wins||0}</td>
        <td>${p.stats?.losses||0}</td>
        <td>${p.stats?.pointsFor||0}</td>
        <td>${p.stats?.pointsAgainst||0}</td>
      `;
      tr.onclick=()=>showDetail(p);
      tableBody.appendChild(tr);
    });
}

function showDetail(p){
  detailContent.innerHTML=`
    ${p.photo ? `<img src="${p.photo}">` : ""}
    <h2>${p.name}</h2>
    <p><b>ID:</b> ${p.id||"-"}</p>
    <p><b>Aadhaar:</b> ${p.aadhar||"-"}</p>
    <p><b>Age:</b> ${p.age||"-"} | <b>Country:</b> ${p.country||"-"}</p>
    <p>${p.bio||""}</p>
    <h3>Stats</h3>
    <ul>
      <li>Matches: ${p.stats?.matchesPlayed||0}</li>
      <li>Wins: ${p.stats?.wins||0}</li>
      <li>Losses: ${p.stats?.losses||0}</li>
      <li>Points For: ${p.stats?.pointsFor||0}</li>
      <li>Points Against: ${p.stats?.pointsAgainst||0}</li>
    </ul>
    ${p.videos && p.videos.length ? `<p><a href="${p.videos[0]}" target="_blank">üé• Watch Video</a></p>`:""}
  `;
  detailPanel.style.display="block";
}
document.getElementById("closeDetail").onclick=()=>detailPanel.style.display="none";

// Add Player
document.getElementById("addBtn").onclick=()=>{
  const id=document.getElementById("pId").value.trim();
  const aadhar=document.getElementById("pAadhar").value.trim();
  const name=document.getElementById("pName").value.trim();
  if(!name) return;
  const age=document.getElementById("pAge").value.trim();
  const country=document.getElementById("pCountry").value.trim();
  const bio=document.getElementById("pBio").value.trim();
  const video=document.getElementById("pVideo").value.trim();
  const file=document.getElementById("pPhoto").files[0];

  const addPlayer=(photo)=>{
    S.players.push({
      id,aadhar,name,age,country,bio,
      photo, videos:video?[video]:[],
      stats:{matchesPlayed:0,wins:0,losses:0,pointsFor:0,pointsAgainst:0}
    });
    renderPlayers();
    ["pId","pAadhar","pName","pAge","pCountry","pBio","pVideo","pPhoto"].forEach(id=>document.getElementById(id).value="");
  };

  if(file){
    const reader=new FileReader();
    reader.onload=e=>addPlayer(e.target.result);
    reader.readAsDataURL(file);
  } else {
    addPlayer("");
  }
};

// Export
document.getElementById("exportBtn").onclick=()=>{
  const fname=document.getElementById("fileName").value.trim() || "players";
  const data=JSON.stringify({players:S.players},null,2);
  const blob=new Blob([data],{type:"application/json"});
  const a=document.createElement("a");
  a.href=URL.createObjectURL(blob);
  a.download=`${fname}.json`;
  a.click();
};

// Import
const importFile=document.getElementById("importFile");
document.getElementById("importBtn").onclick=()=>importFile.click();
importFile.onchange=e=>{
  const f=e.target.files[0];
  if(!f) return;
  const r=new FileReader();
  r.onload=ev=>{
    try{
      const o=JSON.parse(ev.target.result);
      S.players=o.players||[];
      renderPlayers();
    }catch(err){ alert("Bad file"); }
  };
  r.readAsText(f);
};

// Search
document.getElementById("searchBar").oninput=(e)=>{
  renderPlayers(e.target.value);
};
</script>
</body>
</html>
